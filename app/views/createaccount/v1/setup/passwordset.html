{% extends 'layout.html' %}
{% from 'button/macro.njk' import button %}
{% from 'back-link/macro.njk' import backLink %}

{% block pageTitle %}
Create a password
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

{#       {{ backLink({
        "href": "enter-email",
        "text": "Back to: Enter your email"
      }) }} #}

      <h1>
        Create a password
      </h1>



            <p>Your password must have:<ul></span><li>8 characters or more</li><li>1 capital letter or more</li></ul></p>

          <label class="nhsuk-label" for="input-with-hint-text">
            Create a password
          </label>
        <input autocomplete="on" class="nhsuk-input nhsuk-input--width-20" data-toggle-password-field id="revealPassword" name="revealPassword" type="password" aria-describedby="password reveal">
          <div style="display: inline; position: relative;">
            <button type="button" aria-pressed="false" class="button-link form__toggle-password" data-toggle-password style="border: none; position: absolute; right: 10px; top: -5px;">
              <span class="nhsuk-body-s" style="margin-bottom: 0px;"><b>Show</b></span>
            </button>
          </div>
          
          <label class="nhsuk-label nhsuk-u-margin-top-3" for="input-with-hint-text">
              Confirm password
            </label>
          <input autocomplete="on" class="nhsuk-input nhsuk-input--width-20" data-toggle-password-field-confirm id="revealPassword" name="revealPassword" type="password" aria-describedby="password reveal">
          <div style="display: inline; position: relative;">
            <div style="display: inline; position: relative;">
              <button type="button" aria-pressed="false" data-toggle-password-confirm class="button-link form__toggle-password" style="border: none; position: absolute; right: 10px; top: -5px;">
                <span id="text-toggle" class="nhsuk-body-s" style="margin-bottom: 0px;"><b>Show</b></span>
              </button>
            </div>          
          </div>

          <h2 style="font-size:20px; margin:1.5em 0 0;line-height: 20px">Agree to our terms of useâ€‹</h2>
          <p class="small" style="margin-top: 16px;">We will collect and save your information securely. We will not share your personal information without your consent.</p>
          <p class="small">By continuing you confirm that you agree to our <a href="/legal/privacy">privacy notice</a> and <a href="/legal/terms">terms and conditions.</a></p>    

      <form action="{{ thisPage }}" method="post">

        <input id="email" name="emailAddress" value="cid.testuser1@gmail.com" type="hidden"> 
        <input type="hidden" class="nhsuk-input nhsuk-u-width-three-quarters" id="UserFirstName" name="UserFirstName" value="{{ data['UserFirstName'] }}" type="text">
        <input type="hidden" class="nhsuk-input nhsuk-u-width-three-quarters" id="UserLastName" name="UserLastName" value="{{ data['UserLastName'] }}" type="text">


        <button class="nhsuk-button full-width" >Continue</button>
      </form>
      
{#      id="button--save"  #}
          </div>
        </div>  

        <script type="text/javascript">
 submitSpinner()
  function buttonClicked(target) {
      target.setAttribute('disabled', 'disabled')
      target.className += ' button--save'
      setTimeout(function () {
        window.location.href = target.dataset.redirect;
      }, 2000)
    }
  function submitSpinner() {
    var selects = document.getElementById('button--save')
    selects.addEventListener('click', function (event) {
      event.preventDefault()
      if (selects.getAttribute('disabled') === 'disabled') {
        console.log('already clicked')
      } else {
        event.preventDefault()
        console.log(selects.getAttribute('disabled'))
        buttonClicked(selects)
      }
    })
  }

</script>
        

{% endblock %}